<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Nvim documentation: if_perl</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.0/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-header">

              <a href="/" class="navbar-brand">
                <img src="/images/logo@2x.png" id="navbar-logo" alt="Neovim">
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <h1>Nvim documentation: if_perl</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="if_perl.txt"></A><B>if_perl.txt</B>*   Nvim


		  VIM REFERENCE MANUAL    by Jacques Germishuys


The <A HREF="#perl">perl</A> Interface to Vim				*<A NAME="if_perl"></A><B>if_perl</B>* *<A NAME="perl"></A><B>perl</B>*

See |<A HREF="provider.html#provider-perl">provider-perl</A>| for more information.

                                      Type |<A HREF="various.html#gO">gO</A>| to see the table of contents.

==============================================================================

1. Commands						*<A NAME="perl-commands"></A><B>perl-commands</B>*


							*<A NAME=":perl"></A><B>:perl</B>*
:[range]perl {stmt}
			Execute <A HREF="#perl">perl</A> statement {stmt}.  The current package is
			&quot;main&quot;.  A simple check if the `:perl` command is
			working:
<B>				:perl print "Hello"</B>

:[range]perl <A HREF="change.html#&lt;&lt;">&lt;&lt;</A> [endmarker]
{script}
{endmarker}
			Execute <A HREF="#perl">perl</A> <A HREF="usr_41.html#script">script</A> {script}.  Useful for including
			<A HREF="#perl">perl</A> code in Vim scripts.  Requires <A HREF="#perl">perl</A>, see
			|<A HREF="if_pyth.html#script-here">script-here</A>|.

The {endmarker} below the {script} must <A HREF="lua.html#NOT">NOT</A> be preceded by any white space.

If [endmarker] is omitted from after the &quot;<A HREF="change.html#&lt;&lt;">&lt;&lt;</A>&quot;, a dot '<A HREF="repeat.html#.">.</A>' must be used after
{script}, like for the |<A HREF="insert.html#:append">:append</A>| and |<A HREF="insert.html#:insert">:insert</A>| commands.

Example:
<B>	function! MyVimMethod()</B>
<B>	perl &lt;&lt; EOF</B>
<B>	sub my_vim_method</B>
<B>	{</B>
<B>		print "Hello World!\n";</B>
<B>	}</B>
<B>	EOF</B>
<B>	endfunction</B>

To see what version of <A HREF="#perl">perl</A> you have:

<B>	:perl print $^V</B>
 

							*<A NAME=":perldo"></A><B>:perldo</B>*
:[range]perldo {cmd}	Execute <A HREF="#perl">perl</A> command {cmd} for each line in the[range],
			with $_ being set to the test of each line in turn,
			without a trailing <A HREF="intro.html#&lt;EOL&gt;">&lt;EOL&gt;</A>. In addition to $_, $line and
			$linenr is also set to the line content and line number
			respectively. Setting $_ will change the text, but note
			that <A HREF="motion.html#it">it</A> is not possible to add or delete lines using
			this command.
			The default for <A HREF="cmdline.html#[range]">[range]</A> is the whole file: &quot;1,$&quot;.

Examples:

<B>	:perldo $_ = reverse($_);</B>
<B>	:perldo $_ = "".$linenr." =&gt; $line";</B>

One can use `:perldo` in conjunction with `:perl` to <A HREF="change.html#filter">filter</A> a range using
<A HREF="#perl">perl</A>. For example:

<B>	:perl &lt;&lt; EOF</B>
<B>	sub perl_vim_string_replace</B>
<B>	{</B>
<B>	    my $line = shift;</B>
<B>	    my $needle = $vim-&gt;eval('@a');</B>
<B>	    my $replacement = $vim-&gt;eval('@b');</B>
<B>	    $line =~ s/$needle/$replacement/g;</B>
<B>	    return $line;</B>
<B>	}</B>
<B>	EOF</B>
<B>	:let @a='somevalue'</B>
<B>	:let @b='newvalue'</B>
<B>	:'&lt;,'&gt;perldo $_ = perl_vim_string_replace($_)</B>
 

							*<A NAME=":perlfile"></A><B>:perlfile</B>*
:[range]perlfile <A HREF="editing.html#{file}">{file}</A>
			Execute the <A HREF="#perl">perl</A> <A HREF="usr_41.html#script">script</A> in <A HREF="editing.html#{file}">{file}</A>.  The whole
			argument is used <A HREF="motion.html#as">as</A> a single file name.

Both of these commands <A HREF="diff.html#do">do</A> essentially the same thing - they execute a piece of
<A HREF="#perl">perl</A> code, with the &quot;current range&quot; set to the given line range.

In the <A HREF="change.html#case">case</A> of <A HREF="#:perl">:perl</A>, the code to execute is in the command-line.
In the <A HREF="change.html#case">case</A> of <A HREF="#:perlfile">:perlfile</A>, the code to execute is the contents of the given file.

<A HREF="#perl">perl</A> commands cannot be used in the |<A HREF="eval.html#sandbox">sandbox</A>|.

To pass arguments you need to set @ARGV explicitly.  Example:

<B>	:perl @ARGV = ("foo", "bar");</B>
<B>	:perlfile myscript.pl</B>


Here are some examples					*<A NAME="perl-examples"></A><B>perl-examples</B>* 

<B>	:perl print "Hello"</B>
<B>	:perl $current-&gt;line (uc ($current-&gt;line))</B>
<B>	:perl my $str = $current-&gt;buffer-&gt;[42]; print "Set \$str to: $str"</B>

Note that changes (such <A HREF="motion.html#as">as</A> the &quot;use&quot; statements) persist from one command
to the next.

==============================================================================

2. The VIM module					*<A NAME="perl-vim"></A><B>perl-vim</B>*

Perl code gets all of its access to Neovim via the &quot;VIM&quot; module.

Overview
<B>	print "Hello"				# displays a message</B>
<B>	VIM::Msg("Hello")			# displays a message</B>
<B>	VIM::SetOption("ai")			# sets a vim option</B>
<B>	$nbuf = VIM::Buffers()			# returns the number of buffers</B>
<B>	@buflist = VIM::Buffers()		# returns array of all buffers</B>
<B>	$mybuf = (VIM::Buffers('a.c'))[0] 	# returns buffer object for 'a.c'</B>
<B>	@winlist = VIM::Windows()		# returns array of all windows</B>
<B>	$nwin = VIM::Windows()			# returns the number of windows</B>
<B>	($success, $v) = VIM::Eval('&amp;path')	# $v: option 'path', $success: 1</B>
<B>	($success, $v) = VIM::Eval('&amp;xyz')	# $v: '' and $success: 0</B>
<B>	$v = VIM::Eval('expand("&lt;cfile&gt;")')	# expands &lt;cfile&gt;</B>
<B>	$curwin-&gt;SetHeight(10)			# sets the window height</B>
<B>	@pos = $curwin-&gt;Cursor()		# returns (row, col) array</B>
<B>	@pos = (10, 10)</B>
<B>	$curwin-&gt;Cursor(@pos)			# sets cursor to @pos</B>
<B>	$curwin-&gt;Cursor(10,10)			# sets cursor to row 10 col 10</B>
<B>	$mybuf = $curwin-&gt;Buffer()		# returns the buffer object for window</B>
<B>	$curbuf-&gt;Name()				# returns buffer name</B>
<B>	$curbuf-&gt;Number()			# returns buffer number</B>
<B>	$curbuf-&gt;Count()			# returns the number of lines</B>
<B>	$l = $curbuf-&gt;Get(10)			# returns line 10</B>
<B>	@l = $curbuf-&gt;Get(1 .. 5)		# returns lines 1 through 5</B>
<B>	$curbuf-&gt;Delete(10)			# deletes line 10</B>
<B>	$curbuf-&gt;Delete(10, 20)			# delete lines 10 through 20</B>
<B>	$curbuf-&gt;Append(10, "Line")		# appends a line</B>
<B>	$curbuf-&gt;Append(10, "L1", "L2", "L3")	# appends 3 lines</B>
<B>	@l = ("L1", "L2", "L3")</B>
<B>	$curbuf-&gt;Append(10, @l)			# appends L1, L2 and L3</B>
<B>	$curbuf-&gt;Set(10, "Line")		# replaces line 10</B>
<B>	$curbuf-&gt;Set(10, "Line1", "Line2")	# replaces lines 10 and 11</B>
<B>	$curbuf-&gt;Set(10, @l)			# replaces 3 lines</B>

Module Functions:


							*<A NAME="perl-Msg"></A><B>perl-Msg</B>*
VIM::Msg({msg})
			Displays the message {msg}.


							*<A NAME="perl-SetOption"></A><B>perl-SetOption</B>*
VIM::SetOption({arg})	Sets a vim option.  {arg} can be any argument that the
			&quot;<A HREF="options.html#:set">:set</A>&quot; command accepts.  Note that this means that no
			spaces are allowed in the argument!  See |<A HREF="options.html#:set">:set</A>|.


							*<A NAME="perl-Buffers"></A><B>perl-Buffers</B>*
VIM::Buffers([{bn}...])	With no arguments, returns a <A HREF="eval.html#list">list</A> of all the <A HREF="windows.html#buffers">buffers</A>
			in an array <A HREF="repeat.html#context">context</A> or returns the number of <A HREF="windows.html#buffers">buffers</A>
			in a scalar <A HREF="repeat.html#context">context</A>.  For a <A HREF="eval.html#list">list</A> of buffer names or
			numbers {bn}, returns a <A HREF="eval.html#list">list</A> of the <A HREF="windows.html#buffers">buffers</A> matching
			{bn}, using the same rules <A HREF="motion.html#as">as</A> Vim's internal
			|<A HREF="eval.html#bufname()">bufname()</A>| function.
			WARNING: the <A HREF="eval.html#list">list</A> becomes invalid when |<A HREF="windows.html#:bwipe">:bwipe</A>| is
			used.


							*<A NAME="perl-Windows"></A><B>perl-Windows</B>*
VIM::Windows([{wn}...])	With no arguments, returns a <A HREF="eval.html#list">list</A> of all the <A HREF="windows.html#windows">windows</A>
			in an array <A HREF="repeat.html#context">context</A> or returns the number of <A HREF="windows.html#windows">windows</A>
			in a scalar <A HREF="repeat.html#context">context</A>.  For a <A HREF="eval.html#list">list</A> of <A HREF="windows.html#window">window</A> numbers
			{wn}, returns a <A HREF="eval.html#list">list</A> of the <A HREF="windows.html#windows">windows</A> with those
			numbers.
			WARNING: the <A HREF="eval.html#list">list</A> becomes invalid when a <A HREF="windows.html#window">window</A> is
			closed.


							*<A NAME="perl-DoCommand"></A><B>perl-DoCommand</B>*
VIM::DoCommand({cmd})	Executes <A HREF="intro.html#Ex">Ex</A> command {cmd}.


							*<A NAME="perl-Eval"></A><B>perl-Eval</B>*
VIM::Eval({expr})	Evaluates {expr} and returns (success, value) in <A HREF="eval.html#list">list</A>
			<A HREF="repeat.html#context">context</A> or just value in scalar <A HREF="repeat.html#context">context</A>.
			success=1 indicates that val contains the value of
			{expr}; success=0 indicates a failure to evaluate
			the <A HREF="eval.html#expression">expression</A>.  '@x' returns the contents of <A HREF="intro.html#register">register</A>
			<A HREF="change.html#x">x</A>, '&amp;x' returns the value of option <A HREF="change.html#x">x</A>, '<A HREF="change.html#x">x</A>' returns the
			value of internal |<A HREF="eval.html#variables">variables</A>| <A HREF="change.html#x">x</A>, and '$x' is equivalent
			to perl's $ENV{x}.  All |<A HREF="eval.html#functions">functions</A>| accessible from
			the command-line are valid for {expr}.
			A |<A HREF="eval.html#List">List</A>| is turned into a <A HREF="eval.html#string">string</A> by joining the items
			and <A HREF="insert.html#inserting">inserting</A> line breaks.

==============================================================================

3. VIM::Buffer <A HREF="vimindex.html#objects">objects</A>					*<A NAME="perl-buffer"></A><B>perl-buffer</B>*

Methods:


							*<A NAME="perl-Buffer-Name"></A><B>perl-Buffer-Name</B>*
Name()		Returns the filename for the Buffer.


							*<A NAME="perl-Buffer-Number"></A><B>perl-Buffer-Number</B>*
Number()	Returns the number of the Buffer.


							*<A NAME="perl-Buffer-Count"></A><B>perl-Buffer-Count</B>*
Count()		Returns the number of lines in the Buffer.


							*<A NAME="perl-Buffer-Get"></A><B>perl-Buffer-Get</B>*
Get({lnum}, {lnum}?, <A HREF="eval.html#...">...</A>)
			Returns a text <A HREF="eval.html#string">string</A> of line {lnum} in the Buffer
			for each {lnum} specified.  An array can be passed
			with a <A HREF="eval.html#list">list</A> of {lnum}'s specified.


							*<A NAME="perl-Buffer-Delete"></A><B>perl-Buffer-Delete</B>*
Delete({lnum}, {lnum}?)
			Deletes line {lnum} in the Buffer.  With the second
			{lnum}, deletes the range of lines from the first
			{lnum} to the second {lnum}.


							*<A NAME="perl-Buffer-Append"></A><B>perl-Buffer-Append</B>*
Append({lnum}, {line}, {line}?, <A HREF="eval.html#...">...</A>)
			Appends each {line} <A HREF="eval.html#string">string</A> after Buffer line {lnum}.
			The <A HREF="eval.html#list">list</A> of {line}s can be an array.


							*<A NAME="perl-Buffer-Set"></A><B>perl-Buffer-Set</B>*
Set({lnum}, {line}, {line}?, <A HREF="eval.html#...">...</A>)
			Replaces one or more Buffer lines with specified
			{lines}s, starting at Buffer line {lnum}.  The <A HREF="eval.html#list">list</A> of
			{line}s can be an array.  If the arguments are
			invalid, replacement does not occur.

==============================================================================

4. VIM::Window <A HREF="vimindex.html#objects">objects</A>					*<A NAME="perl-window"></A><B>perl-window</B>*

Methods:

							*<A NAME="perl-Window-SetHeight"></A><B>perl-Window-SetHeight</B>*
SetHeight({height})
			Sets the Window height to {height}, within screen
			<A HREF="vi_diff.html#limits">limits</A>.


							*<A NAME="perl-Window-GetCursor"></A><B>perl-Window-GetCursor</B>*
Cursor({row}?, {col}?)
			With no arguments, returns a (row, col) array for the
			current cursor position in the Window.  With {row} and
			{col} arguments, sets the Window's cursor position to
			{row} and {col}.  Note that {col} is numbered from 0,
			Perl-fashion, and thus is one <A HREF="various.html#less">less</A> than the value in
			Vim's ruler.


Buffer()						*<A NAME="perl-Window-Buffer"></A><B>perl-Window-Buffer</B>*
			Returns the Buffer object corresponding to the given
			Window.

==============================================================================

5. Lexical <A HREF="eval.html#variables">variables</A>					*<A NAME="perl-globals"></A><B>perl-globals</B>*

There are multiple lexical <A HREF="eval.html#variables">variables</A>.

$curwin			The current Window object.
$curbuf			The current Buffer object.
$vim			A Neovim::Ext object.
$nvim			The same <A HREF="motion.html#as">as</A> $nvim.
$current		A Neovim::Ext::Current object.

These are also available via the &quot;main&quot; package:

$main::curwin		The current Window object.
$main::curbuf		The current Buffer object.

==============================================================================
<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun May  2 05:42:02 UTC 2021 from <a href="https://github.com/neovim/neovim/commit/b227cedf82341813514da55baa48511eca4014b0"><code>b227ced</code></a>.
      </div>
    </footer>
  </body>
</html>
